<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="false">

    <contextName>zhihu</contextName>

    <property threadPoolName="log.path" value="/opt/admin/zhihu/logs" />
    <Property threadPoolName="log.pattern" value="%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] -- %logger{80}  %msg%n"/>
	<property threadPoolName="log.maxHistory" value="15" />
	<property threadPoolName="log.rootLevel" value="INFO" />
	<property threadPoolName="log.zhihuLevel" value="INFO" />

    <!--输出到控制台-->
    <appender threadPoolName="console_logger" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${log.pattern}</pattern>
        </encoder>
    </appender>

    <!--主干日志-->
    <appender threadPoolName="zhihu_logger" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${log.path}/zhihu.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${log.path}/zhihu.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>${log.maxHistory}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${log.pattern}</pattern>
        </encoder>
    </appender>


    <appender threadPoolName="monitor_logger" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${log.path}/monitor.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${log.path}/monitor.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>${log.maxHistory}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${log.pattern}</pattern>
        </encoder>
    </appender>

    <root level="${log.rootLevel}">
        <appender-ref ref="zhihu_logger"/>
        <appender-ref ref="console_logger"/>
    </root>

    <logger threadPoolName="console" level="DEBUG" additivity="false">
        <appender-ref ref="console_logger"/>
    </logger>

    <logger threadPoolName="zhihu" level="INFO" additivity="false">
        <appender-ref ref="zhihu_logger"/>
        <appender-ref ref="console_logger"/>
    </logger>

    <logger threadPoolName="monitor" level="DEBUG" additivity="false">
        <appender-ref ref="monitor_logger"/>
    </logger>

    <!-- 配置这个路径下访问的类的logger threadPoolName-->
    <Logger threadPoolName="com.crawl" level="debug" additivity="false">
        <appender-ref ref="monitor_logger"/>
    </Logger>

</configuration>